<?xml version='1.0' encoding='utf-8'?>
<graphml xmlns="http://graphml.graphdrawing.org/xmlns" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd"><key id="d5" for="edge" attr.name="relation" attr.type="string"/>
<key id="d4" for="node" attr.name="desc" attr.type="string"/>
<key id="d3" for="node" attr.name="module" attr.type="string"/>
<key id="d2" for="node" attr.name="type" attr.type="string"/>
<key id="d1" for="node" attr.name="layer" attr.type="string"/>
<key id="d0" for="node" attr.name="name" attr.type="string"/>
<graph edgedefault="directed"><node id="llm_providers">
  <data key="d0">LLM 提供商适配层</data>
  <data key="d1">顶层</data>
  <data key="d2">适配器集合</data>
  <data key="d3">concordia/contrib/language_models/*</data>
  <data key="d4">OpenAI、Google、Amazon、HuggingFace、Mistral、Ollama、Together、VLLM 等统一封装</data>
</node>
<node id="embedder">
  <data key="d0">Sentence Embedder</data>
  <data key="d1">顶层</data>
  <data key="d2">函数/服务</data>
  <data key="d3">user-provided callable</data>
  <data key="d4">用于关联记忆的句向量嵌入函数</data>
</node>
<node id="simulation">
  <data key="d0">Simulation</data>
  <data key="d1">中层</data>
  <data key="d2">核心编排</data>
  <data key="d3">concordia/prefabs/simulation/generic.py</data>
  <data key="d4">初始化实体与 GM、运行引擎循环、生成日志与检查点</data>
</node>
<node id="engines">
  <data key="d0">Engines</data>
  <data key="d1">中层</data>
  <data key="d2">执行引擎</data>
  <data key="d3">concordia/environment/engines/*</data>
  <data key="d4">Sequential/Simultaneous/Questionnaire 等时间与执行流控制</data>
</node>
<node id="entities">
  <data key="d0">Entities</data>
  <data key="d1">中层</data>
  <data key="d2">参与者</data>
  <data key="d3">concordia/agents/*</data>
  <data key="d4">能够观察世界与采取动作的主体（带组件与日志）</data>
</node>
<node id="game_masters">
  <data key="d0">Game Masters</data>
  <data key="d1">中层</data>
  <data key="d2">环境协调者</data>
  <data key="d3">concordia/components/game_master/*</data>
  <data key="d4">负责生成观察、定义动作规格、决定下一行动者与解析事件</data>
</node>
<node id="agent_components">
  <data key="d0">Agent Components</data>
  <data key="d1">中层</data>
  <data key="d2">组件集合</data>
  <data key="d3">concordia/components/agent/*</data>
  <data key="d4">记忆、指令、观察、计划、拼接行动等可组合的上下文组件</data>
</node>
<node id="prefabs">
  <data key="d0">Prefabs</data>
  <data key="d1">中层</data>
  <data key="d2">构建配方</data>
  <data key="d3">concordia/prefabs/*</data>
  <data key="d4">可复用的实体/GM/仿真配方（basic、dialogic、marketplace 等）</data>
</node>
<node id="language_model_base">
  <data key="d0">LanguageModel 基类</data>
  <data key="d1">中层</data>
  <data key="d2">抽象接口</data>
  <data key="d3">concordia/language_model/language_model.py</data>
  <data key="d4">统一采样接口（sample_text、sample_choice），供适配层实现</data>
</node>
<node id="assoc_memory">
  <data key="d0">AssociativeMemoryBank</data>
  <data key="d1">底层</data>
  <data key="d2">内存存储</data>
  <data key="d3">concordia/associative_memory/basic_associative_memory.py</data>
  <data key="d4">基于嵌入的记忆存取，GM 共享一个内存库，实体各自持有</data>
</node>
<node id="typing">
  <data key="d0">Typing</data>
  <data key="d1">底层</data>
  <data key="d2">类型与协议</data>
  <data key="d3">concordia/typing/*</data>
  <data key="d4">Prefab/Entity/Scene/Simulation 等类型定义与协议约束</data>
</node>
<node id="utils">
  <data key="d0">Utils</data>
  <data key="d1">底层</data>
  <data key="d2">工具集合</data>
  <data key="d3">concordia/utils/*</data>
  <data key="d4">并发、HTML、JSON、采样、绘图等通用工具</data>
</node>
<node id="component_instructions">
  <data key="d0">Instructions</data>
  <data key="d1">中层</data>
  <data key="d2">行为指令组件</data>
  <data key="d3">concordia/components/agent/instructions.py</data>
  <data key="d4">为代理提供角色扮演的默认指令，定义代理应该如何表现</data>
</node>
<node id="component_memory">
  <data key="d0">Memory</data>
  <data key="d1">中层</data>
  <data key="d2">记忆组件</data>
  <data key="d3">concordia/components/agent/memory.py</data>
  <data key="d4">由记忆库支持的组件，用于存储和检索代理的经验</data>
</node>
<node id="component_observation">
  <data key="d0">Observation</data>
  <data key="d1">中层</data>
  <data key="d2">观察组件</data>
  <data key="d3">concordia/components/agent/observation.py</data>
  <data key="d4">接收和处理代理观察到的信息，将其添加到记忆中</data>
</node>
<node id="component_all_similar_memories">
  <data key="d0">All Similar Memories</data>
  <data key="d1">中层</data>
  <data key="d2">相似记忆检索组件</data>
  <data key="d3">concordia/components/agent/all_similar_memories.py</data>
  <data key="d4">检索与当前情境相似的记忆，帮助代理做出决策</data>
</node>
<node id="component_concat_act">
  <data key="d0">Concat Act Component</data>
  <data key="d1">中层</data>
  <data key="d2">行动拼接组件</data>
  <data key="d3">concordia/components/agent/concat_act_component.py</data>
  <data key="d4">将来自不同上下文组件的信息拼接起来，生成代理的行动</data>
</node>
<node id="component_constant">
  <data key="d0">Constant</data>
  <data key="d1">中层</data>
  <data key="d2">常量组件</data>
  <data key="d3">concordia/components/agent/constant.py</data>
  <data key="d4">返回固定值的简单组件，用于提供不变的上下文信息</data>
</node>
<node id="component_plan">
  <data key="d0">Plan</data>
  <data key="d1">中层</data>
  <data key="d2">计划组件</data>
  <data key="d3">concordia/components/agent/plan.py</data>
  <data key="d4">帮助代理制定和跟踪长期计划的组件</data>
</node>
<node id="component_question_of_recent_memories">
  <data key="d0">Question of Recent Memories</data>
  <data key="d1">中层</data>
  <data key="d2">近期记忆问题组件</data>
  <data key="d3">concordia/components/agent/question_of_recent_memories.py</data>
  <data key="d4">基于最近记忆提出问题并回答，增强代理的反思能力</data>
</node>
<edge source="llm_providers" target="language_model_base" id="0">
  <data key="d5">implement</data>
</edge>
<edge source="simulation" target="engines" id="0">
  <data key="d5">uses</data>
</edge>
<edge source="simulation" target="game_masters" id="0">
  <data key="d5">instantiates</data>
</edge>
<edge source="simulation" target="entities" id="0">
  <data key="d5">instantiates</data>
</edge>
<edge source="simulation" target="assoc_memory" id="0">
  <data key="d5">creates_for_gm</data>
</edge>
<edge source="simulation" target="typing" id="0">
  <data key="d5">depend</data>
</edge>
<edge source="simulation" target="utils" id="0">
  <data key="d5">use</data>
</edge>
<edge source="engines" target="game_masters" id="0">
  <data key="d5">query_components</data>
</edge>
<edge source="engines" target="typing" id="0">
  <data key="d5">depend</data>
</edge>
<edge source="engines" target="utils" id="0">
  <data key="d5">use</data>
</edge>
<edge source="entities" target="game_masters" id="0">
  <data key="d5">act_to</data>
</edge>
<edge source="entities" target="agent_components" id="0">
  <data key="d5">compose</data>
</edge>
<edge source="entities" target="language_model_base" id="0">
  <data key="d5">call</data>
</edge>
<edge source="entities" target="assoc_memory" id="0">
  <data key="d5">own</data>
</edge>
<edge source="entities" target="typing" id="0">
  <data key="d5">depend</data>
</edge>
<edge source="game_masters" target="entities" id="0">
  <data key="d5">make_observation_for</data>
</edge>
<edge source="game_masters" target="assoc_memory" id="0">
  <data key="d5">share</data>
</edge>
<edge source="game_masters" target="typing" id="0">
  <data key="d5">depend</data>
</edge>
<edge source="agent_components" target="component_instructions" id="0">
  <data key="d5">contains</data>
</edge>
<edge source="agent_components" target="component_memory" id="0">
  <data key="d5">contains</data>
</edge>
<edge source="agent_components" target="component_observation" id="0">
  <data key="d5">contains</data>
</edge>
<edge source="agent_components" target="component_all_similar_memories" id="0">
  <data key="d5">contains</data>
</edge>
<edge source="agent_components" target="component_concat_act" id="0">
  <data key="d5">contains</data>
</edge>
<edge source="agent_components" target="component_constant" id="0">
  <data key="d5">contains</data>
</edge>
<edge source="agent_components" target="component_plan" id="0">
  <data key="d5">contains</data>
</edge>
<edge source="agent_components" target="component_question_of_recent_memories" id="0">
  <data key="d5">contains</data>
</edge>
<edge source="prefabs" target="entities" id="0">
  <data key="d5">build</data>
</edge>
<edge source="prefabs" target="game_masters" id="0">
  <data key="d5">build</data>
</edge>
<edge source="assoc_memory" target="embedder" id="0">
  <data key="d5">use</data>
</edge>
<edge source="component_instructions" target="language_model_base" id="0">
  <data key="d5">use</data>
</edge>
<edge source="component_memory" target="assoc_memory" id="0">
  <data key="d5">use</data>
</edge>
<edge source="component_observation" target="component_memory" id="0">
  <data key="d5">add_to</data>
</edge>
<edge source="component_all_similar_memories" target="language_model_base" id="0">
  <data key="d5">use</data>
</edge>
<edge source="component_all_similar_memories" target="component_memory" id="0">
  <data key="d5">retrieve_from</data>
</edge>
<edge source="component_concat_act" target="language_model_base" id="0">
  <data key="d5">use</data>
</edge>
<edge source="component_question_of_recent_memories" target="language_model_base" id="0">
  <data key="d5">use</data>
</edge>
</graph></graphml>